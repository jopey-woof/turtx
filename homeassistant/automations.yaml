# Turtle Monitoring System - Automations
# Phase 1: Basic environmental monitoring and alerts

# Temperature monitoring and alerts
- id: turtle_temperature_alert
  alias: "ğŸ¢ Temperature Alert"
  description: "Alert when turtle habitat temperature is out of safe range"
  trigger:
    - platform: numeric_state
      entity_id: sensor.turtle_temperature_numeric
      below: 70
      for:
        minutes: 5
    - platform: numeric_state
      entity_id: sensor.turtle_temperature_numeric
      above: 85
      for:
        minutes: 5
  action:
    - service: persistent_notification.create
      data:
        title: "ğŸ¢ Turtle Temperature Alert"
        message: "Temperature is {{ trigger.to_state.state }}Â°F - Outside safe range (70-85Â°F)"
        notification_id: turtle_temp_alert

# Humidity monitoring and alerts
- id: turtle_humidity_alert
  alias: "ğŸ¢ Humidity Alert"
  description: "Alert when turtle habitat humidity is out of safe range"
  trigger:
    - platform: numeric_state
      entity_id: sensor.turtle_humidity_numeric
      below: 60
      for:
        minutes: 5
    - platform: numeric_state
      entity_id: sensor.turtle_humidity_numeric
      above: 80
      for:
        minutes: 5
  action:
    - service: persistent_notification.create
      data:
        title: "ğŸ¢ Turtle Humidity Alert"
        message: "Humidity is {{ trigger.to_state.state }}% - Outside safe range (60-80%)"
        notification_id: turtle_humidity_alert

# System health monitoring
- id: turtle_system_health_alert
  alias: "ğŸ¢ System Health Alert"
  description: "Alert when system resources are critical"
  trigger:
    - platform: numeric_state
      entity_id: sensor.processor_use
      above: 80
      for:
        minutes: 2
    - platform: numeric_state
      entity_id: sensor.memory_use_percent
      above: 90
      for:
        minutes: 2
    - platform: numeric_state
      entity_id: sensor.disk_use_percent_home
      above: 90
      for:
        minutes: 2
  action:
    - service: persistent_notification.create
      data:
        title: "ğŸ¢ System Health Alert"
        message: "System resources critical - CPU: {{ states('sensor.processor_use') }}%, Memory: {{ states('sensor.memory_use_percent') }}%, Disk: {{ states('sensor.disk_use_percent_home') }}%"
        notification_id: turtle_system_health_alert
