<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üê¢ TurtX Professional Monitoring System</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* CRITICAL: Prevent scrolling and ensure exact 100vh fit */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            /* Day Theme - Professional Medical Grade */
            --day-bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --day-bg-secondary: rgba(255, 255, 255, 0.95);
            --day-bg-card: rgba(255, 255, 255, 0.9);
            --day-text-primary: #1a202c;
            --day-text-secondary: #4a5568;
            --day-accent: #3182ce;
            --day-success: #10B981;
            --day-warning: #F59E0B;
            --day-error: #EF4444;
            --day-info: #3B82F6;
            
            /* Night Theme - Easy on Eyes */
            --night-bg-primary: linear-gradient(135deg, #0c4a6e 0%, #1e3a8a 100%);
            --night-bg-secondary: rgba(15, 23, 42, 0.95);
            --night-bg-card: rgba(30, 41, 59, 0.9);
            --night-text-primary: #f8fafc;
            --night-text-secondary: #cbd5e1;
            --night-accent: #60a5fa;
            --night-success: #34d399;
            --night-warning: #fbbf24;
            --night-error: #f87171;
            --night-info: #60a5fa;
            
            /* Animation Variables */
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            --shadow-glass: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            --backdrop-blur: blur(8px);
        }

        html, body {
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* CRITICAL: No scrollbars ever */
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        /* Theme System */
        .theme-day {
            --bg-primary: var(--day-bg-primary);
            --bg-secondary: var(--day-bg-secondary);
            --bg-card: var(--day-bg-card);
            --text-primary: var(--day-text-primary);
            --text-secondary: var(--day-text-secondary);
            --accent: var(--day-accent);
            --success: var(--day-success);
            --warning: var(--day-warning);
            --error: var(--day-error);
            --info: var(--day-info);
        }

        .theme-night {
            --bg-primary: var(--night-bg-primary);
            --bg-secondary: var(--night-bg-secondary);
            --bg-card: var(--night-bg-card);
            --text-primary: var(--night-text-primary);
            --text-secondary: var(--night-text-secondary);
            --accent: var(--night-accent);
            --success: var(--night-success);
            --warning: var(--night-warning);
            --error: var(--night-error);
            --info: var(--night-info);
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: var(--transition-smooth);
            user-select: none;
            touch-action: manipulation;
        }

        /* Main Container - EXACTLY 100vh */
        .dashboard-container {
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* ANIMATED TURTLE HEADER - 15vh */
        .animated-header {
            height: 15vh;
            background: linear-gradient(135deg, #0c1445 0%, #1a237e 50%, #000051 100%);
            position: relative;
            overflow: hidden;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2vw;
        }

        .theme-day .animated-header {
            background: linear-gradient(135deg, #87CEEB 0%, #98D8E8 50%, #B6E5F0 100%);
        }

        /* Star Field Background */
        .star-field {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent);
            background-size: 200px 100px;
            animation: twinkle 4s ease-in-out infinite;
        }

        .theme-day .star-field {
            opacity: 0.3;
        }

        /* Turtle with Rainbow Trail */
        .turtle-container {
            display: flex;
            align-items: center;
            position: relative;
            z-index: 10;
        }

        .turtle-sprite {
            font-size: clamp(2rem, 4vw, 3rem);
            animation: swim 3s ease-in-out infinite;
            margin-right: 1rem;
        }

        .rainbow-trail {
            width: 200px;
            height: 20px;
            background: linear-gradient(
                90deg,
                #ff0000, #ff7700, #ffdd00, #00ff00, 
                #0077ff, #4400ff, #ff0088, #ff0000
            );
            background-size: 400% 100%;
            animation: rainbow-flow 2s linear infinite;
            border-radius: 10px;
            opacity: 0.8;
        }

        /* Title and Moon */
        .title-section {
            text-align: center;
            z-index: 10;
        }

        .title-text {
            color: white;
            font-size: clamp(1.2rem, 3vw, 2rem);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin: 0;
        }

        .subtitle-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: clamp(0.8rem, 1.5vw, 1rem);
            margin: 0;
        }

        .moon-weather-section {
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 10;
        }

        .moon {
            width: clamp(30px, 5vw, 50px);
            height: clamp(30px, 5vw, 50px);
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fff, #ddd);
            animation: moon-glow 6s ease-in-out infinite;
            transition: var(--transition-smooth);
        }

        .theme-day .moon {
            background: radial-gradient(circle at 30% 30%, #FFD700, #FFA500);
        }

        /* Weather Card */
        .weather-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: var(--backdrop-blur);
            border-radius: 12px;
            padding: 0.5rem 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-width: 120px;
        }

        .weather-temp {
            font-size: clamp(1rem, 2vw, 1.2rem);
            font-weight: 600;
            color: white;
            margin: 0;
        }

        .weather-desc {
            font-size: clamp(0.7rem, 1.2vw, 0.8rem);
            color: rgba(255, 255, 255, 0.8);
            margin: 0;
        }

        /* Pages Container - 65vh (100vh - 15vh header - 20vh navigation) */
        .pages-container {
            height: 65vh;
            position: relative;
            overflow: hidden;
        }

        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 65vh;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transform: translateX(100vw);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        .page.active {
            opacity: 1;
            transform: translateX(0);
        }

        /* STATUS PAGE */
        .status-main-content {
            height: 45vh;
            display: flex;
            gap: 1vw;
            padding: 1vh 2vw;
        }

        .temperature-card {
            flex: 1;
            background: var(--bg-card);
            backdrop-filter: var(--backdrop-blur);
            border-radius: 20px;
            padding: 2vh 2vw;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow-glass);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .basking-card {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.9) 0%, rgba(255, 154, 0, 0.8) 100%);
        }

        .cooling-card {
            background: linear-gradient(135deg, rgba(116, 185, 255, 0.9) 0%, rgba(45, 134, 208, 0.8) 100%);
        }

        .card-icon {
            font-size: clamp(2rem, 4vw, 3rem);
            margin-bottom: 1vh;
        }

        .card-title {
            font-size: clamp(1rem, 2vw, 1.3rem);
            font-weight: 600;
            color: white;
            margin-bottom: 1vh;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .temperature-value {
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: 800;
            color: white;
            line-height: 1;
            margin-bottom: 0.5vh;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .humidity-value {
            font-size: clamp(1.2rem, 3vw, 2rem);
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        /* System Indicators - 20vh */
        .system-indicators {
            height: 20vh;
            display: flex;
            flex-wrap: wrap;
            gap: 1vw;
            padding: 1vh 2vw;
            align-items: center;
            justify-content: center;
        }

        .indicator {
            background: var(--bg-card);
            backdrop-filter: var(--backdrop-blur);
            border-radius: 16px;
            padding: 1vh 1.5vw;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 0.5vw;
            transition: var(--transition-bounce);
            min-width: 120px;
            justify-content: center;
        }

        .indicator-icon {
            font-size: clamp(1.2rem, 2.5vw, 1.8rem);
        }

        .indicator-text {
            font-size: clamp(0.8rem, 1.5vw, 1rem);
            font-weight: 500;
            color: var(--text-primary);
        }

        .indicator.active {
            background: var(--success);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        }

        .indicator.warning {
            background: var(--warning);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.3);
        }

        .indicator.error {
            background: var(--error);
            color: white;
            animation: alert-pulse 2s ease-in-out infinite;
        }

        /* CAMERA PAGE */
        .camera-content {
            height: 55vh;
            display: flex;
            flex-direction: column;
            padding: 1vh 2vw;
        }

        .camera-feed {
            flex: 1;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1vh;
            overflow: hidden;
            position: relative;
        }

        .camera-placeholder {
            color: rgba(255, 255, 255, 0.6);
            font-size: clamp(1.2rem, 3vw, 2rem);
            text-align: center;
        }

        .camera-controls {
            height: 10vh;
            display: flex;
            gap: 1vw;
            align-items: center;
            justify-content: center;
        }

        /* DATA PAGE */
        .data-content {
            height: 65vh;
            display: flex;
            flex-direction: column;
            padding: 1vh 2vw;
        }

        .data-charts {
            height: 30vh;
            display: flex;
            gap: 1vw;
            margin-bottom: 1vh;
        }

        .chart-card {
            flex: 1;
            background: var(--bg-card);
            backdrop-filter: var(--backdrop-blur);
            border-radius: 16px;
            padding: 1vh 1vw;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .activity-log {
            height: 34vh;
            background: var(--bg-card);
            backdrop-filter: var(--backdrop-blur);
            border-radius: 16px;
            padding: 1vh 1vw;
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
        }

        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1vh;
            padding: 0 0.5vw;
        }

        .log-title {
            font-size: clamp(1rem, 2vw, 1.3rem);
            font-weight: 600;
            color: var(--text-primary);
        }

        .filter-buttons {
            display: flex;
            gap: 0.5vw;
        }

        .filter-btn {
            background: var(--bg-secondary);
            border: 1px solid var(--accent);
            border-radius: 20px;
            padding: 0.5vh 1vw;
            font-size: clamp(0.7rem, 1.2vw, 0.8rem);
            cursor: pointer;
            transition: var(--transition-smooth);
            color: var(--text-primary);
            position: relative;
        }

        .filter-btn.active {
            background: var(--accent);
            color: white;
        }

        .filter-badge {
            position: absolute;
            top: -0.5vh;
            right: -0.5vw;
            background: var(--error);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .log-entries {
            height: 30vh;
            overflow: hidden;
        }

        .log-entry {
            display: flex;
            align-items: center;
            gap: 1vw;
            padding: 0.8vh 1vw;
            margin-bottom: 0.5vh;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 3px solid var(--info);
            transition: var(--transition-smooth);
            cursor: pointer;
        }

        .log-entry:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(0.5vw);
        }

        .log-entry.warning {
            border-left-color: var(--warning);
        }

        .log-entry.error {
            border-left-color: var(--error);
        }

        .log-time {
            font-size: clamp(0.7rem, 1.2vw, 0.8rem);
            color: var(--text-secondary);
            min-width: 60px;
        }

        .log-message {
            flex: 1;
            font-size: clamp(0.8rem, 1.4vw, 0.9rem);
            color: var(--text-primary);
        }

        .log-icon {
            font-size: clamp(1rem, 1.8vw, 1.2rem);
        }

        /* Navigation Bar - 20vh */
        .navigation {
            height: 20vh;
            background: var(--bg-secondary);
            backdrop-filter: var(--backdrop-blur);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2vw;
            padding: 0 2vw;
        }

        .nav-button {
            flex: 1;
            max-width: 200px;
            height: 12vh;
            background: var(--bg-card);
            border: 2px solid var(--accent);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-bounce);
            color: var(--text-primary);
            font-weight: 600;
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .nav-button.active {
            background: var(--accent);
            color: white;
            transform: scale(1.05);
        }

        .nav-icon {
            font-size: clamp(1.5rem, 3vw, 2rem);
            margin-bottom: 0.5vh;
        }

        .nav-text {
            font-size: clamp(0.9rem, 1.8vw, 1.1rem);
        }

        /* Animations */
        @keyframes swim {
            0%, 100% { transform: translateY(0px) rotate(-2deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }

        @keyframes rainbow-flow {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        @keyframes moon-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); }
            50% { box-shadow: 0 0 30px rgba(255, 255, 255, 0.6); }
        }

        @keyframes alert-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px var(--error); }
        }

        @keyframes data-update {
            0% { background-color: transparent; }
            50% { background-color: var(--accent); opacity: 0.7; }
            100% { background-color: transparent; }
        }

        .data-flash {
            animation: data-update 0.5s ease;
        }

        /* Connection Status */
        .connection-status {
            position: absolute;
            top: 1vh;
            left: 1vw;
            background: var(--success);
            color: white;
            padding: 0.5vh 1vw;
            border-radius: 20px;
            font-size: clamp(0.7rem, 1.2vw, 0.8rem);
            font-weight: 500;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5vw;
        }

        .connection-status.disconnected {
            background: var(--error);
        }

        .connection-status.connecting {
            background: var(--warning);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Theme Toggle */
        .theme-toggle {
            position: absolute;
            top: 1vh;
            right: 1vw;
            background: var(--bg-card);
            border: 1px solid var(--accent);
            border-radius: 20px;
            padding: 0.5vh 1vw;
            cursor: pointer;
            color: var(--text-primary);
            font-size: clamp(0.8rem, 1.5vw, 1rem);
            z-index: 1000;
            transition: var(--transition-smooth);
        }

        .theme-toggle:hover {
            background: var(--accent);
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .system-indicators {
                gap: 0.5vw;
            }
            
            .indicator {
                min-width: 100px;
                padding: 0.8vh 1vw;
            }
            
            .temperature-card {
                padding: 1vh 1vw;
            }
        }

        /* Camera Status Styles */
        .camera-status {
            position: absolute;
            top: 1vh;
            left: 1vw;
            padding: 0.5vh 1vw;
            border-radius: 20px;
            font-size: clamp(0.8rem, 1.5vw, 1rem);
            font-weight: 500;
            z-index: 10;
        }
        
        .camera-status.offline {
            background: var(--error);
            color: white;
        }
        
        .camera-status.online {
            background: var(--success);
            color: white;
        }
        
        .camera-placeholder.show {
            display: flex !important;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: clamp(1.2rem, 3vw, 2rem);
            text-align: center;
        }

        /* Kiosk Mode - Hide Cursor */
        @media (width: 1024px) and (height: 600px) {
            * {
                cursor: none !important;
            }
        }
    </style>
</head>
<body class="theme-day">
    <!-- Connection Status -->
    <div class="connection-status connecting">
        <div class="status-dot"></div>
        <span id="connection-text">Connecting...</span>
    </div>

    <!-- Theme Toggle -->
    <div class="theme-toggle" onclick="toggleTheme()">
        <span id="theme-text">üåô Night</span>
    </div>

    <div class="dashboard-container">
        <!-- Animated Header - 15vh -->
        <header class="animated-header">
            <div class="star-field"></div>
            
            <div class="turtle-container">
                <div class="turtle-sprite">üê¢</div>
                <div class="rainbow-trail"></div>
            </div>

            <div class="title-section">
                <h1 class="title-text">TurtX Monitor</h1>
                <p class="subtitle-text">Professional Life Support System</p>
            </div>

            <div class="moon-weather-section">
                <div class="weather-card" id="weather-card">
                    <div class="weather-temp" id="weather-temp">--¬∞F</div>
                    <div class="weather-desc" id="weather-desc">Loading...</div>
                </div>
                <div class="moon" id="moon"></div>
            </div>
        </header>

        <!-- Pages Container - 65vh -->
        <main class="pages-container">
            <!-- STATUS PAGE -->
            <div class="page active" id="status-page">
                <div class="status-main-content">
                    <div class="temperature-card basking-card">
                        <div class="card-icon">üî•</div>
                        <div class="card-title">BASKING AREA</div>
                        <div class="temperature-value" id="basking-temp">--¬∞F</div>
                        <div class="humidity-value" id="basking-humidity">--%</div>
                    </div>
                    
                    <div class="temperature-card cooling-card">
                        <div class="card-icon">‚ùÑÔ∏è</div>
                        <div class="card-title">COOLING AREA</div>
                        <div class="temperature-value" id="cooling-temp">--¬∞F</div>
                        <div class="humidity-value" id="cooling-humidity">--%</div>
                    </div>
                </div>

                <div class="system-indicators">
                    <div class="indicator" id="heater-indicator">
                        <span class="indicator-icon">üå°Ô∏è</span>
                        <span class="indicator-text">Heater</span>
                    </div>
                    <div class="indicator" id="uv-indicator">
                        <span class="indicator-icon">üí°</span>
                        <span class="indicator-text">UV Light</span>
                    </div>
                    <div class="indicator" id="power-indicator">
                        <span class="indicator-icon">‚ö°</span>
                        <span class="indicator-text">Power</span>
                    </div>
                    <div class="indicator" id="network-indicator">
                        <span class="indicator-icon">üì°</span>
                        <span class="indicator-text">Network</span>
                    </div>
                    <div class="indicator" id="alerts-indicator">
                        <span class="indicator-icon">üö®</span>
                        <span class="indicator-text">Alerts</span>
                    </div>
                </div>
            </div>

            <!-- CAMERA PAGE -->
            <div class="page" id="camera-page">
                <div class="camera-content">
                    <div class="camera-feed">
                        <div class="camera-status offline" id="camera-status">
                            üìπ Camera Offline
                        </div>
                        
                        <!-- Live Camera Stream -->
                        <img class="camera-stream" 
                             id="camera-stream" 
                             style="display: none; width: 100%; height: auto; border-radius: 16px;"
                             alt="Turtle Camera Feed" />
                        
                        <!-- Camera Placeholder -->
                        <div class="camera-placeholder show" id="camera-placeholder">
                            üìπ Connecting to Camera...
                        </div>
                        
                        <!-- Camera Error Message -->
                        <div class="camera-error" id="camera-error" style="display: none; color: #ef4444; text-align: center; padding: 2rem;">
                            ‚ö†Ô∏è Camera Connection Failed<br/>
                            <small>Check camera connection and try refresh</small>
                        </div>
                    </div>
                    <div class="camera-controls">
                        <button class="nav-button" onclick="refreshCamera()">üîÑ Refresh</button>
                        <button class="nav-button" onclick="switchCamera()">üì∑ Switch</button>
                        <button class="nav-button" onclick="toggleFullscreen()">üîç Fullscreen</button>
                    </div>
                </div>
            </div>

            <!-- DATA PAGE -->
            <div class="page" id="data-page">
                <div class="data-content">
                    <div class="data-charts">
                        <div class="chart-card">
                            <h3>üìà Temperature Trends</h3>
                            <div style="flex: 1; display: flex; align-items: center; justify-content: center; color: var(--text-secondary);">
                                Chart visualization coming soon
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>üíß Humidity Trends</h3>
                            <div style="flex: 1; display: flex; align-items: center; justify-content: center; color: var(--text-secondary);">
                                Chart visualization coming soon
                            </div>
                        </div>
                    </div>

                    <div class="activity-log">
                        <div class="log-header">
                            <h3 class="log-title">üìã Recent Activity</h3>
                            <div class="filter-buttons">
                                <button class="filter-btn active" data-filter="all">
                                    All <span class="filter-badge" id="badge-all">0</span>
                                </button>
                                <button class="filter-btn" data-filter="critical">
                                    üî¥ <span class="filter-badge" id="badge-critical">0</span>
                                </button>
                                <button class="filter-btn" data-filter="warning">
                                    üü° <span class="filter-badge" id="badge-warning">0</span>
                                </button>
                                <button class="filter-btn" data-filter="info">
                                    üîµ <span class="filter-badge" id="badge-info">0</span>
                                </button>
                            </div>
                        </div>
                        <div class="log-entries" id="log-entries">
                            <!-- Log entries will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Navigation Bar - 20vh -->
        <nav class="navigation">
            <button class="nav-button active" onclick="showPage('status')">
                <div class="nav-icon">üè†</div>
                <div class="nav-text">STATUS</div>
            </button>
            <button class="nav-button" onclick="showPage('camera')">
                <div class="nav-icon">üìπ</div>
                <div class="nav-text">CAMERA</div>
            </button>
            <button class="nav-button" onclick="showPage('data')">
                <div class="nav-icon">üìä</div>
                <div class="nav-text">DATA</div>
            </button>
        </nav>
    </div>

    <script>
        // TurtX Professional Monitoring Dashboard
        class TurtXDashboard {
            constructor() {
                this.apiBaseUrl = 'http://10.0.20.69/api';
                this.currentTheme = 'day';
                this.currentPage = 'status';
                this.isConnected = false;
                this.updateInterval = null;
                this.weatherInterval = null;
                this.logEntries = [];
                this.weatherApiKey = 'YOUR_OPENWEATHERMAP_API_KEY'; // Replace with actual key
                
                this.init();
            }

            async init() {
                console.log('üê¢ Initializing TurtX Professional Dashboard...');
                
                this.initializeTheme();
                this.initializeEventListeners();
                this.startDataPolling();
                this.startWeatherUpdates();
                this.initializeMockLogs(); // For demo purposes
                
                // Set initial moon phase
                this.updateMoonPhase();
                
                console.log('‚úÖ Dashboard initialized successfully');
            }

            initializeTheme() {
                const hour = new Date().getHours();
                const shouldBeNight = hour < 6 || hour > 20;
                this.currentTheme = shouldBeNight ? 'night' : 'day';
                document.body.className = `theme-${this.currentTheme}`;
                document.getElementById('theme-text').textContent = 
                    this.currentTheme === 'day' ? 'üåô Night' : '‚òÄÔ∏è Day';
            }

            initializeEventListeners() {
                // Filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const filter = e.target.dataset.filter;
                        this.filterLogs(filter);
                    });
                });
                
                // Log entries
                document.getElementById('log-entries').addEventListener('click', (e) => {
                    const logEntry = e.target.closest('.log-entry');
                    if (logEntry) {
                        this.expandLogEntry(logEntry);
                    }
                });
            }

            async startDataPolling() {
                this.updateInterval = setInterval(() => {
                    this.fetchLatestData();
                }, 2000);
                
                // Initial fetch
                await this.fetchLatestData();
            }

            async fetchLatestData() {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/latest`);
                    if (!response.ok) throw new Error(`HTTP ${response.status}`);
                    
                    const data = await response.json();
                    this.updateDashboard(data);
                    this.updateConnectionStatus(true);
                    
                } catch (error) {
                    console.error('Failed to fetch data:', error);
                    this.updateConnectionStatus(false);
                }
            }

            updateDashboard(data) {
                // Flash animation for data update
                document.querySelectorAll('.temperature-value, .humidity-value').forEach(el => {
                    el.classList.add('data-flash');
                    setTimeout(() => el.classList.remove('data-flash'), 500);
                });

                // Update temperature displays
                if (data.basking_area) {
                    document.getElementById('basking-temp').textContent = 
                        `${data.basking_area.temperature.toFixed(1)}¬∞F`;
                    document.getElementById('basking-humidity').textContent = 
                        `${data.basking_area.humidity}%`;
                }

                if (data.cooling_area) {
                    document.getElementById('cooling-temp').textContent = 
                        `${data.cooling_area.temperature.toFixed(1)}¬∞F`;
                    document.getElementById('cooling-humidity').textContent = 
                        `${data.cooling_area.humidity}%`;
                }

                // Update system indicators
                if (data.system_status) {
                    this.updateSystemIndicators(data.system_status);
                }
            }

            updateSystemIndicators(status) {
                const indicators = {
                    'heater': status.heater === 'on',
                    'uv': status.uv_light === 'on',
                    'power': status.power === 'stable',
                    'network': status.network === 'connected',
                    'alerts': status.alerts === 'none'
                };

                Object.entries(indicators).forEach(([key, isActive]) => {
                    const indicator = document.getElementById(`${key}-indicator`);
                    indicator.className = 'indicator';
                    if (isActive) {
                        indicator.classList.add('active');
                    } else if (key === 'alerts' && !isActive) {
                        indicator.classList.add('error');
                    } else {
                        indicator.classList.add('warning');
                    }
                });
            }

            updateConnectionStatus(connected) {
                const statusEl = document.querySelector('.connection-status');
                const textEl = document.getElementById('connection-text');
                
                if (connected) {
                    statusEl.className = 'connection-status';
                    textEl.textContent = 'Connected';
                    this.isConnected = true;
                } else {
                    statusEl.className = 'connection-status disconnected';
                    textEl.textContent = 'Disconnected';
                    this.isConnected = false;
                }
            }

            async startWeatherUpdates() {
                // Update every 10 minutes
                this.weatherInterval = setInterval(() => {
                    this.fetchWeatherData();
                }, 600000);
                
                // Initial fetch
                await this.fetchWeatherData();
            }

            async fetchWeatherData() {
                try {
                    // Mock weather data for demo (replace with real API call)
                    const mockWeather = {
                        temp: Math.round(65 + Math.random() * 20), // 65-85¬∞F
                        description: ['Sunny', 'Partly Cloudy', 'Clear'][Math.floor(Math.random() * 3)]
                    };
                    
                    document.getElementById('weather-temp').textContent = `${mockWeather.temp}¬∞F`;
                    document.getElementById('weather-desc').textContent = mockWeather.description;
                    
                } catch (error) {
                    console.error('Weather fetch failed:', error);
                    document.getElementById('weather-temp').textContent = '--¬∞F';
                    document.getElementById('weather-desc').textContent = 'Unavailable';
                }
            }

            updateMoonPhase() {
                const now = new Date();
                const hour = now.getHours();
                const moonEl = document.getElementById('moon');
                
                // Simple day/night indication
                if (hour >= 6 && hour <= 18) {
                    // Daytime - show sun
                    moonEl.style.background = 'radial-gradient(circle at 30% 30%, #FFD700, #FFA500)';
                } else {
                    // Nighttime - show moon
                    moonEl.style.background = 'radial-gradient(circle at 30% 30%, #fff, #ddd)';
                }
            }

            initializeMockLogs() {
                const mockLogs = [
                    { time: '14:32', message: 'UV cycle completed successfully', type: 'info', icon: '‚úÖ' },
                    { time: '14:15', message: 'Temperature optimal for basking', type: 'info', icon: 'üå°Ô∏è' },
                    { time: '13:45', message: 'Humidity levels stable', type: 'info', icon: 'üíß' },
                    { time: '13:30', message: 'Motion detected in habitat', type: 'info', icon: '‚ÑπÔ∏è' },
                    { time: '13:15', message: 'System health check passed', type: 'info', icon: '‚úÖ' },
                    { time: '12:45', message: 'Camera feed quality excellent', type: 'info', icon: 'üìπ' }
                ];

                this.logEntries = mockLogs;
                this.renderLogEntries();
                this.updateLogCounters();
            }

            renderLogEntries() {
                const container = document.getElementById('log-entries');
                container.innerHTML = '';

                this.logEntries.slice(0, 6).forEach(log => { // Max 6 entries to fit 30vh
                    const entry = document.createElement('div');
                    entry.className = `log-entry ${log.type}`;
                    entry.innerHTML = `
                        <span class="log-icon">${log.icon}</span>
                        <span class="log-time">${log.time}</span>
                        <span class="log-message">${log.message}</span>
                    `;
                    container.appendChild(entry);
                });
            }

            filterLogs(filter) {
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
                
                // For demo, just showing all logs
                this.renderLogEntries();
            }

            updateLogCounters() {
                const counts = {
                    all: this.logEntries.length,
                    critical: this.logEntries.filter(log => log.type === 'critical').length,
                    warning: this.logEntries.filter(log => log.type === 'warning').length,
                    info: this.logEntries.filter(log => log.type === 'info').length
                };

                Object.entries(counts).forEach(([type, count]) => {
                    const badge = document.getElementById(`badge-${type}`);
                    if (badge) {
                        badge.textContent = count;
                        badge.style.display = count > 0 ? 'flex' : 'none';
                    }
                });
            }

            expandLogEntry(entry) {
                // Add subtle interaction feedback
                entry.style.transform = 'translateX(1vw)';
                setTimeout(() => {
                    entry.style.transform = '';
                }, 200);
            }
        }

        // Page Navigation
        function showPage(pageId) {
            // Update navigation buttons
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.nav-button').classList.add('active');

            // Update pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(`${pageId}-page`).classList.add('active');
        }

        // Theme Toggle
        function toggleTheme() {
            const currentTheme = document.body.classList.contains('theme-day') ? 'day' : 'night';
            const newTheme = currentTheme === 'day' ? 'night' : 'day';
            
            document.body.className = `theme-${newTheme}`;
            document.getElementById('theme-text').textContent = 
                newTheme === 'day' ? 'üåô Night' : '‚òÄÔ∏è Day';
            
            if (window.dashboard) {
                window.dashboard.currentTheme = newTheme;
                window.dashboard.updateMoonPhase();
            }
        }

        // Camera Management
        let currentCamera = 0;
        const cameraUrls = [
            'http://10.0.20.69:8000/api/camera/stream',  // Primary MJPEG stream
            'http://10.0.20.69:8000/api/camera/live',    // Live still frames
            '/api/camera/stream',                        // Local proxy
            '/api/camera/live'                           // Local proxy fallback
        ];

        function initializeCamera() {
            console.log('üé• Initializing camera system...');
            tryNextCamera();
        }

        function tryNextCamera() {
            if (currentCamera >= cameraUrls.length) {
                showCameraError();
                return;
            }

            const cameraStream = document.getElementById('camera-stream');
            const cameraPlaceholder = document.getElementById('camera-placeholder');
            const cameraError = document.getElementById('camera-error');
            const cameraStatus = document.getElementById('camera-status');

            if (cameraPlaceholder) cameraPlaceholder.style.display = 'block';
            if (cameraError) cameraError.style.display = 'none';
            
            if (cameraStatus) {
                cameraStatus.textContent = 'üìπ Connecting...';
                cameraStatus.className = 'camera-status offline';
            }

            console.log(`üìπ Trying camera URL: ${cameraUrls[currentCamera]}`);

            if (cameraStream) {
                // Add aggressive cache-busting to avoid browser cache issues
                const streamUrl = cameraUrls[currentCamera] + '?cache_bust=' + Date.now() + '&r=' + Math.random();
                
                cameraStream.onload = () => {
                    console.log('‚úÖ Camera connected successfully!');
                    showCameraStream();
                };
                
                cameraStream.onerror = () => {
                    console.log(`‚ùå Camera failed: ${cameraUrls[currentCamera]}`);
                    currentCamera++;
                    setTimeout(tryNextCamera, 2000);
                };
                
                // Clear src first to force reload
                cameraStream.src = '';
                setTimeout(() => {
                    cameraStream.src = streamUrl;
                }, 100);
            }
        }

        function showCameraStream() {
            const cameraStream = document.getElementById('camera-stream');
            const cameraPlaceholder = document.getElementById('camera-placeholder');
            const cameraError = document.getElementById('camera-error');
            const cameraStatus = document.getElementById('camera-status');

            if (cameraStream) cameraStream.style.display = 'block';
            if (cameraPlaceholder) cameraPlaceholder.style.display = 'none';
            if (cameraError) cameraError.style.display = 'none';
            
            if (cameraStatus) {
                cameraStatus.textContent = 'üìπ Live Feed';
                cameraStatus.className = 'camera-status online';
            }
        }

        function showCameraError() {
            const cameraStream = document.getElementById('camera-stream');
            const cameraPlaceholder = document.getElementById('camera-placeholder');
            const cameraError = document.getElementById('camera-error');
            const cameraStatus = document.getElementById('camera-status');

            if (cameraStream) cameraStream.style.display = 'none';
            if (cameraPlaceholder) cameraPlaceholder.style.display = 'none';
            if (cameraError) cameraError.style.display = 'block';
            
            if (cameraStatus) {
                cameraStatus.textContent = 'üìπ No Camera';
                cameraStatus.className = 'camera-status offline';
            }

            console.log('‚ùå All camera sources failed');
        }

        // Camera Control Functions
        function refreshCamera() {
            console.log('üîÑ Refreshing camera...');
            currentCamera = 0;
            tryNextCamera();
        }

        function switchCamera() {
            console.log('üì∑ Switching to next camera...');
            currentCamera = (currentCamera + 1) % cameraUrls.length;
            tryNextCamera();
        }

        function toggleFullscreen() {
            const cameraFeed = document.querySelector('.camera-feed');
            if (cameraFeed) {
                if (!document.fullscreenElement) {
                    cameraFeed.requestFullscreen().catch(err => {
                        console.log('Fullscreen failed:', err);
                    });
                } else {
                    document.exitFullscreen();
                }
            }
        }

        // Initialize Dashboard
        window.addEventListener('DOMContentLoaded', () => {
            window.dashboard = new TurtXDashboard();
            
            // Initialize camera when switching to camera page
            document.querySelector('[onclick="showPage(\'camera\')"]').addEventListener('click', () => {
                setTimeout(initializeCamera, 500);
            });
        });
    </script>
</body>
</html>